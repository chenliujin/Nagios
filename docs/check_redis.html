<h1>* NRPE</h1>
<pre>
$ yum install -y perl-Redis python-redis

# vim /etc/nrpe.d/check-redis.cfg
command[check_redis_connected_clients]=/usr/lib64/nagios/plugins/check_redis.pl -H 127.0.0.1 -p 6379 -a 'connected_clients' -w ~ -c ~ -f
</pre>

<h1>* 检查代理是否工作</h1>
<pre>
# /usr/lib64/nagios/plugins/check_nrpe -H 172.16.64.150 -c check_redis_connected_clients
OK: REDIS 2.4.10 on 127.0.0.1:6381 has 1 databases (db0) with 10515 keys, up 14 days 16 hours - connected_clients is 26 | connected_clients=26
</pre>

<h1>* Service</h1>
<pre>
# vim /etc/nagios/conf.d/redis.cfg
define service {
    use                     generic-service,service-pnp
    service_description     Redis Clients
    check_command           check_nrpe!check_redis_connected_clients
    host_name               vm7
	normal_check_interval   5
	notification_interval   5
}	
</pre>